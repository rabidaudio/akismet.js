!function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){(function(n){"use strict";function r(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./enums"),a=t("superagent"),u=t("url"),c=function(){function t(e,n){if(i(this,t),this.charset=null,this.language=null,this.url="string"==typeof e?e:null,"object"==("undefined"==typeof n?"undefined":r(n))&&n)for(var o in n){var s=n[o];this.hasOwnProperty(o)&&"undefined"!=typeof s&&(this[o]=s)}}return o(t,[{key:"toJSON",value:function(t){var e={};return"string"==typeof this.url&&(e.blog=this.url),"string"==typeof this.charset&&(e.blog_charset=this.charset),"string"==typeof this.language&&(e.blog_lang=this.language),JSON.stringify(e,null,t)}},{key:"toString",value:function(){return this.constructor.name+" "+this.toJSON(2)}}],[{key:"fromJSON",value:function(e){var n=void 0;if("string"!=typeof e)n=e;else try{n=JSON.parse(e)}catch(i){return null}return n&&"object"==("undefined"==typeof n?"undefined":r(n))?new t(n.blog,{charset:n.blog_charset,language:n.blog_lang}):null}}]),t}(),l=function(){function e(o,s,a){if(i(this,e),this.apiKey=String(o),this.blog=s instanceof c?s:new c(s),this.isTest=!1,this.serviceUrl="https://"+e.DEFAULT_SERVICE,this.userAgent="Node.js/"+(n.version.length?n.version:"0.0.0")+" | Akismet.js/"+t("../package.json").version,"object"==("undefined"==typeof a?"undefined":r(a))&&a)for(var u in a){var l=a[u];this.hasOwnProperty(u)&&"undefined"!=typeof l&&(this[u]=l)}}return o(e,[{key:"checkComment",value:function(t){var n=u.parse(this.serviceUrl),r=n.host!=e.DEFAULT_SERVICE?u.resolve(this.serviceUrl,s.EndPoints.CHECK_COMMENT):n.protocol+"//"+this.apiKey+"."+n.host+s.EndPoints.CHECK_COMMENT,i=JSON.parse(t.toJSON());return this._queryService(r,i).then(function(t){return"true"==t})}},{key:"submitHam",value:function(t){var n=u.parse(this.serviceUrl),r=n.host!=e.DEFAULT_SERVICE?u.resolve(this.serviceUrl,s.EndPoints.SUBMIT_HAM):n.protocol+"//"+this.apiKey+"."+n.host+s.EndPoints.SUBMIT_HAM;return this._queryService(r,JSON.parse(t.toJSON()))}},{key:"submitSpam",value:function(t){var n=u.parse(this.serviceUrl),r=n.host!=e.DEFAULT_SERVICE?u.resolve(this.serviceUrl,s.EndPoints.SUBMIT_SPAM):n.protocol+"//"+this.apiKey+"."+n.host+s.EndPoints.SUBMIT_SPAM;return this._queryService(r,JSON.parse(t.toJSON()))}},{key:"toString",value:function(){return this.constructor.name+" "+JSON.stringify(this,null,2)}},{key:"verifyKey",value:function(){var t=u.resolve(this.serviceUrl,s.EndPoints.VERIFY_KEY);return this._queryService(t,{}).then(function(t){return"valid"==t})}},{key:"_queryService",value:function(t,e){var n=this;return e.key=this.apiKey,e.blog=this.blog.url,this.blog.charset&&(e.blog_charset=this.blog.charset),this.blog.lang&&(e.blog_lang=this.blog.lang),this.isTest&&(e.is_test="true"),new Promise(function(r,i){return a.post(t).type("form").send(e).set("undefined"!=typeof window?s.HTTPHeaders.X_USER_AGENT:"user-agent",n.userAgent).end(function(t,e){if(t||!e.ok)i(new Error(t?t.status:e.status));else{var n=s.HTTPHeaders.X_AKISMET_DEBUG_HELP;n in e.header?i(new Error(e.header[n])):r(e.text)}})})}}]),e}();l.DEFAULT_SERVICE="rest.akismet.com",e.exports={Blog:c,Client:l}}).call(this,t("_process"))},{"../package.json":18,"./enums":3,_process:7,superagent:13,url:14}],2:[function(t,e,n){"use strict";function r(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=Object.freeze({COMMENT:"comment",PINGBACK:"pingback",TRACKBACK:"trackback"}),a=function(){function t(e){if(i(this,t),this.email=null,this.ipAddress=null,this.name=null,this.role=null,this.url=null,this.userAgent=null,"object"==("undefined"==typeof e?"undefined":r(e))&&e)for(var n in e){var o=e[n];this.hasOwnProperty(n)&&"undefined"!=typeof o&&(this[n]=o)}}return o(t,[{key:"toJSON",value:function(t){var e={};return"string"==typeof this.name&&(e.comment_author=this.name),"string"==typeof this.email&&(e.comment_author_email=this.email),"string"==typeof this.url&&(e.comment_author_url=this.url),"string"==typeof this.userAgent&&(e.user_agent=this.userAgent),"string"==typeof this.ipAddress&&(e.user_ip=this.ipAddress),"string"==typeof this.role&&(e.user_role=this.role),JSON.stringify(e,null,t)}},{key:"toString",value:function(){return this.constructor.name+" "+this.toJSON(2)}}],[{key:"fromJSON",value:function(e){var n=void 0;if("string"!=typeof e)n=e;else try{n=JSON.parse(e)}catch(i){return null}return n&&"object"==("undefined"==typeof n?"undefined":r(n))?new t({name:n.comment_author,email:n.comment_author_email,url:n.comment_author_url,userAgent:n.user_agent,ipAddress:n.user_ip,role:n.user_role}):null}}]),t}(),u=function(){function t(e){if(i(this,t),this.author=null,this.content=null,this.date=null,this.permalink=null,this.postModified=null,this.referrer=null,this.type=null,"object"==("undefined"==typeof e?"undefined":r(e))&&e)for(var n in e){var o=e[n];this.hasOwnProperty(n)&&"undefined"!=typeof o&&(this[n]=o)}}return o(t,[{key:"toJSON",value:function(t){var e={};return this.author instanceof a&&Object.assign(e,JSON.parse(this.author.toJSON())),"string"==typeof this.content&&(e.comment_content=this.content),this.date instanceof Date&&(e.comment_date_gmt=this.date.toISOString()),this.postModified instanceof Date&&(e.comment_post_modified_gmt=this.postModified.toISOString()),"string"==typeof this.type&&(e.comment_type=this.type),"string"==typeof this.permalink&&(e.permalink=this.permalink),"string"==typeof this.referrer&&(e.referrer=this.referrer),JSON.stringify(e,null,t)}},{key:"toString",value:function(){return this.constructor.name+" "+this.toJSON(2)}}],[{key:"fromJSON",value:function(e){var n=void 0;if("string"!=typeof e)n=e;else try{n=JSON.parse(e)}catch(i){return null}if(!n||"object"!=("undefined"==typeof n?"undefined":r(n)))return null;var o=!1;for(var s in n)if("comment_author"==s.substr(0,"comment_author".length)||"user"==s.substr(0,"user".length)){o=!0;break}return new t({author:o?a.fromJSON(n):null,content:n.comment_content,date:"string"==typeof n.comment_date_gmt?new Date(n.comment_date_gmt):null,postModified:"string"==typeof n.comment_post_modified_gmt?new Date(n.comment_post_modified_gmt):null,type:n.comment_type,permalink:n.permalink,referrer:n.referrer})}}]),t}();e.exports={Author:a,Comment:u,CommentType:s}},{}],3:[function(t,e,n){"use strict";var r=Object.freeze({CHECK_COMMENT:"/1.1/comment-check",SUBMIT_HAM:"/1.1/submit-ham",SUBMIT_SPAM:"/1.1/submit-spam",VERIFY_KEY:"/1.1/verify-key"}),i=Object.freeze({X_AKISMET_DEBUG_HELP:"x-akismet-debug-help",X_REQUESTED_WITH:"x-requested-with",X_USER_AGENT:"x-user-agent"});e.exports={EndPoints:r,HTTPHeaders:i}},{}],4:[function(t,e,n){function r(t,e){return p.isUndefined(e)?""+e:p.isNumber(e)&&!isFinite(e)?e.toString():p.isFunction(e)||p.isRegExp(e)?e.toString():e}function i(t,e){return p.isString(t)?t.length<e?t:t.slice(0,e):t}function o(t){return i(JSON.stringify(t.actual,r),128)+" "+t.operator+" "+i(JSON.stringify(t.expected,r),128)}function s(t,e,n,r,i){throw new y.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function a(t,e){t||s(t,!0,e,"==",y.ok)}function u(t,e){if(t===e)return!0;if(p.isBuffer(t)&&p.isBuffer(e)){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return p.isDate(t)&&p.isDate(e)?t.getTime()===e.getTime():p.isRegExp(t)&&p.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:p.isObject(t)||p.isObject(e)?l(t,e):t==e}function c(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function l(t,e){if(p.isNullOrUndefined(t)||p.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(p.isPrimitive(t)||p.isPrimitive(e))return t===e;var n=c(t),r=c(e);if(n&&!r||!n&&r)return!1;if(n)return t=m.call(t),e=m.call(e),u(t,e);var i,o,s=g(t),a=g(e);if(s.length!=a.length)return!1;for(s.sort(),a.sort(),o=s.length-1;o>=0;o--)if(s[o]!=a[o])return!1;for(o=s.length-1;o>=0;o--)if(i=s[o],!u(t[i],e[i]))return!1;return!0}function h(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function f(t,e,n,r){var i;p.isString(n)&&(r=n,n=null);try{e()}catch(o){i=o}if(r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&s(i,n,"Missing expected exception"+r),!t&&h(i,n)&&s(i,n,"Got unwanted exception"+r),t&&i&&n&&!h(i,n)||!t&&i)throw i}var p=t("util/"),m=Array.prototype.slice,d=Object.prototype.hasOwnProperty,y=e.exports=a;y.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=o(this),this.generatedMessage=!0);var e=t.stackStartFunction||s;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var r=n.stack,i=e.name,a=r.indexOf("\n"+i);if(a>=0){var u=r.indexOf("\n",a+1);r=r.substring(u+1)}this.stack=r}}},p.inherits(y.AssertionError,Error),y.fail=s,y.ok=a,y.equal=function(t,e,n){t!=e&&s(t,e,n,"==",y.equal)},y.notEqual=function(t,e,n){t==e&&s(t,e,n,"!=",y.notEqual)},y.deepEqual=function(t,e,n){u(t,e)||s(t,e,n,"deepEqual",y.deepEqual)},y.notDeepEqual=function(t,e,n){u(t,e)&&s(t,e,n,"notDeepEqual",y.notDeepEqual)},y.strictEqual=function(t,e,n){t!==e&&s(t,e,n,"===",y.strictEqual)},y.notStrictEqual=function(t,e,n){t===e&&s(t,e,n,"!==",y.notStrictEqual)},y["throws"]=function(t,e,n){f.apply(this,[!0].concat(m.call(arguments)))},y.doesNotThrow=function(t,e){f.apply(this,[!1].concat(m.call(arguments)))},y.ifError=function(t){if(t)throw t};var g=Object.keys||function(t){var e=[];for(var n in t)d.call(t,n)&&e.push(n);return e}},{"util/":17}],5:[function(t,e,n){function r(t){return t?i(t):void 0}function i(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],6:[function(t,e,n){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],7:[function(t,e,n){function r(){l=!1,a.length?c=a.concat(c):h=-1,c.length&&i()}function i(){if(!l){var t=setTimeout(r);l=!0;for(var e=c.length;e;){for(a=c,c=[];++h<e;)a&&a[h].run();h=-1,e=c.length}a=null,l=!1,clearTimeout(t)}}function o(t,e){this.fun=t,this.array=e}function s(){}var a,u=e.exports={},c=[],l=!1,h=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new o(t,e)),1!==c.length||l||setTimeout(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=s,u.addListener=s,u.once=s,u.off=s,u.removeListener=s,u.removeAllListeners=s,u.emit=s,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],8:[function(t,e,n){(function(t){!function(r){function i(t){throw new RangeError(J[t])}function o(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function s(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(q,".");var i=t.split("."),s=o(i,e).join(".");return r+s}function a(t){for(var e,n,r=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function u(t){return o(t,function(t){var e="";return t>65535&&(t-=65536,e+=P(t>>>10&1023|55296),t=56320|1023&t),e+=P(t)}).join("")}function c(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:S}function l(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function h(t,e,n){var r=0;for(t=n?I(t/x):t>>1,t+=I(t/e);t>U*E>>1;r+=S)t=I(t/U);return I(r+(U+1)*t/(t+j))}function f(t){var e,n,r,o,s,a,l,f,p,m,d=[],y=t.length,g=0,v=A,b=k;for(n=t.lastIndexOf(C),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&i("not-basic"),d.push(t.charCodeAt(r));for(o=n>0?n+1:0;y>o;){for(s=g,a=1,l=S;o>=y&&i("invalid-input"),f=c(t.charCodeAt(o++)),(f>=S||f>I((_-g)/a))&&i("overflow"),g+=f*a,p=b>=l?O:l>=b+E?E:l-b,!(p>f);l+=S)m=S-p,a>I(_/m)&&i("overflow"),a*=m;e=d.length+1,b=h(g-s,e,0==s),I(g/e)>_-v&&i("overflow"),v+=I(g/e),g%=e,d.splice(g++,0,v)}return u(d)}function p(t){var e,n,r,o,s,u,c,f,p,m,d,y,g,v,b,w=[];for(t=a(t),y=t.length,e=A,n=0,s=k,u=0;y>u;++u)d=t[u],128>d&&w.push(P(d));for(r=o=w.length,o&&w.push(C);y>r;){for(c=_,u=0;y>u;++u)d=t[u],d>=e&&c>d&&(c=d);for(g=r+1,c-e>I((_-n)/g)&&i("overflow"),n+=(c-e)*g,e=c,u=0;y>u;++u)if(d=t[u],e>d&&++n>_&&i("overflow"),d==e){for(f=n,p=S;m=s>=p?O:p>=s+E?E:p-s,!(m>f);p+=S)b=f-m,v=S-m,w.push(P(l(m+b%v,0))),f=I(b/v);w.push(P(l(f,0))),s=h(n,g,r==o),n=0,++r}++n,++e}return w.join("")}function m(t){return s(t,function(t){return T.test(t)?f(t.slice(4).toLowerCase()):t})}function d(t){return s(t,function(t){return N.test(t)?"xn--"+p(t):t})}var y="object"==typeof n&&n&&!n.nodeType&&n,g="object"==typeof e&&e&&!e.nodeType&&e,v="object"==typeof t&&t;(v.global===v||v.window===v||v.self===v)&&(r=v);var b,w,_=2147483647,S=36,O=1,E=26,j=38,x=700,k=72,A=128,C="-",T=/^xn--/,N=/[^\x20-\x7E]/,q=/[\x2E\u3002\uFF0E\uFF61]/g,J={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=S-O,I=Math.floor,P=String.fromCharCode;if(b={version:"1.3.2",ucs2:{decode:a,encode:u},decode:f,encode:p,toASCII:d,toUnicode:m},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return b});else if(y&&g)if(e.exports==y)g.exports=b;else for(w in b)b.hasOwnProperty(w)&&(y[w]=b[w]);else r.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var u=1e3;o&&"number"==typeof o.maxKeys&&(u=o.maxKeys);var c=t.length;u>0&&c>u&&(c=u);for(var l=0;c>l;++l){var h,f,p,m,d=t[l].replace(a,"%20"),y=d.indexOf(n);y>=0?(h=d.substr(0,y),f=d.substr(y+1)):(h=d,f=""),p=decodeURIComponent(h),m=decodeURIComponent(f),r(s,p)?i(s[p])?s[p].push(m):s[p]=[s[p],m]:s[p]=m}return s};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],10:[function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,a){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(s(t),function(s){var a=encodeURIComponent(i(s))+n;return o(t[s])?r(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],11:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":9,"./encode":10}],12:[function(t,e,n){e.exports=function(t,e,n){for(var r=0,i=t.length,o=3==arguments.length?n:t[r++];i>r;)o=e.call(null,o,t[r],++r,t);return o}},{}],13:[function(t,e,n){function r(){}function i(t){var e={}.toString.call(t);switch(e){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(t){return t===Object(t)}function s(t){if(!o(t))return t;var e=[];for(var n in t)null!=t[n]&&a(e,n,t[n]);return e.join("&")}function a(t,e,n){return Array.isArray(n)?n.forEach(function(n){a(t,e,n)}):void t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}function u(t){for(var e,n,r={},i=t.split("&"),o=0,s=i.length;s>o;++o)n=i[o],e=n.split("="),r[decodeURIComponent(e[0])]=decodeURIComponent(e[1]);return r}function c(t){var e,n,r,i,o=t.split(/\r?\n/),s={};o.pop();for(var a=0,u=o.length;u>a;++a)n=o[a],e=n.indexOf(":"),r=n.slice(0,e).toLowerCase(),i=w(n.slice(e+1)),s[r]=i;return s}function l(t){return/[\/+]json\b/.test(t)}function h(t){return t.split(/ *; */).shift()}function f(t){return b(t.split(/ *; */),function(t,e){var n=e.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(t[r]=i),t},{})}function p(t,e){e=e||{},this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=c(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function m(t,e){var n=this;v.call(this),this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t=null,e=null;try{e=new p(n)}catch(r){return t=new Error("Parser is unable to parse the response"),t.parse=!0,t.original=r,t.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,n.callback(t)}if(n.emit("response",e),t)return n.callback(t,e);if(e.status>=200&&e.status<300)return n.callback(t,e);var i=new Error(e.statusText||"Unsuccessful HTTP response");i.original=t,i.response=e,i.status=e.status,n.callback(i,e)})}function d(t,e){return"function"==typeof e?new m("GET",t).end(e):1==arguments.length?new m("GET",t):new m(t,e)}function y(t,e){var n=d("DELETE",t);return e&&n.end(e),n}var g,v=t("emitter"),b=t("reduce");g="undefined"!=typeof window?window:"undefined"!=typeof self?self:this,d.getXHR=function(){if(!(!g.XMLHttpRequest||g.location&&"file:"==g.location.protocol&&g.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}return!1};var w="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};d.serializeObject=s,d.parseString=u,d.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},d.serialize={"application/x-www-form-urlencoded":s,"application/json":JSON.stringify},d.parse={"application/x-www-form-urlencoded":u,"application/json":JSON.parse},p.prototype.get=function(t){return this.header[t.toLowerCase()]},p.prototype.setHeaderProperties=function(t){var e=this.header["content-type"]||"";this.type=h(e);var n=f(e);for(var r in n)this[r]=n[r]},p.prototype.parseBody=function(t){var e=d.parse[this.type];return e&&t&&(t.length||t instanceof Object)?e(t):null},p.prototype.setStatusProperties=function(t){1223===t&&(t=204);var e=t/100|0;this.status=this.statusCode=t,this.statusType=e,this.info=1==e,this.ok=2==e,this.clientError=4==e,this.serverError=5==e,this.error=4==e||5==e?this.toError():!1,this.accepted=202==t,this.noContent=204==t,this.badRequest=400==t,this.unauthorized=401==t,this.notAcceptable=406==t,this.notFound=404==t,this.forbidden=403==t},p.prototype.toError=function(){var t=this.req,e=t.method,n=t.url,r="cannot "+e+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=e,i.url=n,i},d.Response=p,v(m.prototype),m.prototype.use=function(t){return t(this),this},m.prototype.timeout=function(t){return this._timeout=t,this},m.prototype.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},m.prototype.abort=function(){return this.aborted?void 0:(this.aborted=!0,this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this)},m.prototype.set=function(t,e){if(o(t)){for(var n in t)this.set(n,t[n]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},m.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},m.prototype.getHeader=function(t){return this._header[t.toLowerCase()]},m.prototype.type=function(t){return this.set("Content-Type",d.types[t]||t),this},m.prototype.parse=function(t){return this._parser=t,this},m.prototype.accept=function(t){return this.set("Accept",d.types[t]||t),this},m.prototype.auth=function(t,e){var n=btoa(t+":"+e);return this.set("Authorization","Basic "+n),this},m.prototype.query=function(t){return"string"!=typeof t&&(t=s(t)),t&&this._query.push(t),this},m.prototype.field=function(t,e){return this._formData||(this._formData=new g.FormData),this._formData.append(t,e),this},m.prototype.attach=function(t,e,n){return this._formData||(this._formData=new g.FormData),this._formData.append(t,e,n),this},m.prototype.send=function(t){var e=o(t),n=this.getHeader("Content-Type");if(e&&o(this._data))for(var r in t)this._data[r]=t[r];else"string"==typeof t?(n||this.type("form"),n=this.getHeader("Content-Type"),"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+t:t:this._data=(this._data||"")+t):this._data=t;return!e||i(t)?this:(n||this.type("json"),this)},m.prototype.callback=function(t,e){var n=this._callback;this.clearTimeout(),n(t,e)},m.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},m.prototype.timeoutError=function(){var t=this._timeout,e=new Error("timeout of "+t+"ms exceeded");e.timeout=t,this.callback(e)},m.prototype.withCredentials=function(){return this._withCredentials=!0,this},m.prototype.end=function(t){var e=this,n=this.xhr=d.getXHR(),o=this._query.join("&"),s=this._timeout,a=this._formData||this._data;this._callback=t||r,n.onreadystatechange=function(){if(4==n.readyState){var t;try{t=n.status}catch(r){t=0}if(0==t){if(e.timedout)return e.timeoutError();if(e.aborted)return;return e.crossDomainError()}e.emit("end")}};var u=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.emit("progress",t)};this.hasListeners("progress")&&(n.onprogress=u);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=u)}catch(c){}if(s&&!this._timer&&(this._timer=setTimeout(function(){e.timedout=!0,e.abort()},s)),o&&(o=d.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!i(a)){var h=this.getHeader("Content-Type"),f=this._parser||d.serialize[h?h.split(";")[0]:""];!f&&l(h)&&(f=d.serialize["application/json"]),f&&(a=f(a))}for(var p in this.header)null!=this.header[p]&&n.setRequestHeader(p,this.header[p]);return this.emit("request",this),n.send("undefined"!=typeof a?a:null),this},m.prototype.then=function(t,e){return this.end(function(n,r){n?e(n):t(r)})},d.Request=m,d.get=function(t,e,n){var r=d("GET",t);return"function"==typeof e&&(n=e,e=null),e&&r.query(e),n&&r.end(n),r},d.head=function(t,e,n){var r=d("HEAD",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.del=y,d["delete"]=y,d.patch=function(t,e,n){var r=d("PATCH",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.post=function(t,e,n){var r=d("POST",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},d.put=function(t,e,n){var r=d("PUT",t);return"function"==typeof e&&(n=e,e=null),e&&r.send(e),n&&r.end(n),r},e.exports=d},{emitter:5,reduce:12}],14:[function(t,e,n){"use strict";function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&c.isObject(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return c.isString(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function s(t,e){return i(t,!1,!0).resolve(e)}function a(t,e){return t?i(t,!1,!0).resolveObject(e):e}var u=t("punycode"),c=t("./util");n.parse=i,n.resolve=s,n.resolveObject=a,n.format=o,n.Url=r;var l=/^([a-z0-9.+-]+:)/i,h=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","	"],m=["{","}","|","\\","^","`"].concat(p),d=["'"].concat(m),y=["%","/","?",";","#"].concat(d),g=["/","?","#"],v=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},O={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},E=t("querystring");r.prototype.parse=function(t,e,n){if(!c.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(i),s=/\\/g;o[0]=o[0].replace(s,"/"),t=o.join(i);var a=t;if(a=a.trim(),!n&&1===t.split("#").length){var h=f.exec(a);if(h)return this.path=a,this.href=a,this.pathname=h[1],h[2]?(this.search=h[2],e?this.query=E.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var p=l.exec(a);if(p){p=p[0];var m=p.toLowerCase();this.protocol=m,a=a.substr(p.length)}if(n||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var j="//"===a.substr(0,2);!j||p&&S[p]||(a=a.substr(2),this.slashes=!0)}if(!S[p]&&(j||p&&!O[p])){for(var x=-1,k=0;k<g.length;k++){var A=a.indexOf(g[k]);-1!==A&&(-1===x||x>A)&&(x=A)}var C,T;T=-1===x?a.lastIndexOf("@"):a.lastIndexOf("@",x),-1!==T&&(C=a.slice(0,T),a=a.slice(T+1),this.auth=decodeURIComponent(C)),x=-1;for(var k=0;k<y.length;k++){var A=a.indexOf(y[k]);-1!==A&&(-1===x||x>A)&&(x=A)}-1===x&&(x=a.length),this.host=a.slice(0,x),a=a.slice(x),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var q=this.hostname.split(/\./),k=0,J=q.length;J>k;k++){var U=q[k];if(U&&!U.match(b)){for(var I="",P=0,R=U.length;R>P;P++)I+=U.charCodeAt(P)>127?"x":U[P];if(!I.match(b)){var M=q.slice(0,k),D=q.slice(k+1),H=U.match(w);H&&(M.push(H[1]),D.unshift(H[2])),D.length&&(a="/"+D.join(".")+a),this.hostname=M.join(".");break}}}this.hostname.length>v?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=u.toASCII(this.hostname));var B=this.port?":"+this.port:"",z=this.hostname||"";this.host=z+B,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!_[m])for(var k=0,J=d.length;J>k;k++){var L=d[k];if(-1!==a.indexOf(L)){var F=encodeURIComponent(L);F===L&&(F=escape(L)),a=a.split(L).join(F)}}var K=a.indexOf("#");-1!==K&&(this.hash=a.substr(K),a=a.slice(0,K));var $=a.indexOf("?");if(-1!==$?(this.search=a.substr($),this.query=a.substr($+1),e&&(this.query=E.parse(this.query)),a=a.slice(0,$)):e&&(this.search="",this.query={}),a&&(this.pathname=a),O[m]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",X=this.search||"";this.path=B+X}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=E.stringify(this.query));var s=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||O[e])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),s=s.replace("#","%23"),e+i+n+s+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(c.isString(t)){var e=new r;e.parse(t,!1,!0),t=e}for(var n=new r,i=Object.keys(this),o=0;o<i.length;o++){var s=i[o];n[s]=this[s]}if(n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var a=Object.keys(t),u=0;u<a.length;u++){var l=a[u];"protocol"!==l&&(n[l]=t[l])}return O[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!O[t.protocol]){for(var h=Object.keys(t),f=0;f<h.length;f++){var p=h[f];n[p]=t[p]}return n.href=n.format(),n}if(n.protocol=t.protocol,t.host||S[t.protocol])n.pathname=t.pathname;else{for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==m[0]&&m.unshift(""),m.length<2&&m.unshift(""),n.pathname=m.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var d=n.pathname||"",y=n.search||"";n.path=d+y}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var g=n.pathname&&"/"===n.pathname.charAt(0),v=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=v||g||n.host&&t.pathname,w=b,_=n.pathname&&n.pathname.split("/")||[],m=t.pathname&&t.pathname.split("/")||[],E=n.protocol&&!O[n.protocol];if(E&&(n.hostname="",n.port=null,n.host&&(""===_[0]?_[0]=n.host:_.unshift(n.host)),n.host="",
t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===m[0]?m[0]=t.host:m.unshift(t.host)),t.host=null),b=b&&(""===m[0]||""===_[0])),v)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,_=m;else if(m.length)_||(_=[]),_.pop(),_=_.concat(m),n.search=t.search,n.query=t.query;else if(!c.isNullOrUndefined(t.search)){if(E){n.hostname=n.host=_.shift();var j=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;j&&(n.auth=j.shift(),n.host=n.hostname=j.shift())}return n.search=t.search,n.query=t.query,c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!_.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var x=_.slice(-1)[0],k=(n.host||t.host||_.length>1)&&("."===x||".."===x)||""===x,A=0,C=_.length;C>=0;C--)x=_[C],"."===x?_.splice(C,1):".."===x?(_.splice(C,1),A++):A&&(_.splice(C,1),A--);if(!b&&!w)for(;A--;A)_.unshift("..");!b||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),k&&"/"!==_.join("/").substr(-1)&&_.push("");var T=""===_[0]||_[0]&&"/"===_[0].charAt(0);if(E){n.hostname=n.host=T?"":_.length?_.shift():"";var j=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;j&&(n.auth=j.shift(),n.host=n.hostname=j.shift())}return b=b||n.host&&_.length,b&&!T&&_.unshift(""),_.length?n.pathname=_.join("/"):(n.pathname=null,n.path=null),c.isNull(n.pathname)&&c.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=h.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":15,punycode:8,querystring:11}],15:[function(t,e,n){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],16:[function(t,e,n){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],17:[function(t,e,n){(function(e,r){function i(t,e){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(e)?r.showHidden=e:e&&n._extend(r,e),_(r.showHidden)&&(r.showHidden=!1),_(r.depth)&&(r.depth=2),_(r.colors)&&(r.colors=!1),_(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function s(t,e){return t}function a(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,e,r){if(t.customInspect&&e&&x(e.inspect)&&e.inspect!==n.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(r,t);return b(i)||(i=u(t,i,r)),i}var o=c(t,e);if(o)return o;var s=Object.keys(e),d=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),j(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(e);if(0===s.length){if(x(e)){var y=e.name?": "+e.name:"";return t.stylize("[Function"+y+"]","special")}if(S(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(E(e))return t.stylize(Date.prototype.toString.call(e),"date");if(j(e))return l(e)}var g="",v=!1,w=["{","}"];if(m(e)&&(v=!0,w=["[","]"]),x(e)){var _=e.name?": "+e.name:"";g=" [Function"+_+"]"}if(S(e)&&(g=" "+RegExp.prototype.toString.call(e)),E(e)&&(g=" "+Date.prototype.toUTCString.call(e)),j(e)&&(g=" "+l(e)),0===s.length&&(!v||0==e.length))return w[0]+g+w[1];if(0>r)return S(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var O;return O=v?h(t,e,r,d,s):s.map(function(n){return f(t,e,r,d,n,v)}),t.seen.pop(),p(O,g,w)}function c(t,e){if(_(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return v(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i){for(var o=[],s=0,a=e.length;a>s;++s)N(e,String(s))?o.push(f(t,e,n,r,String(s),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))}),o}function f(t,e,n,r,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),N(r,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=y(n)?u(t,c.value,null):u(t,c.value,n-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),_(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function m(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function g(t){return null==t}function v(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function _(t){return void 0===t}function S(t){return O(t)&&"[object RegExp]"===A(t)}function O(t){return"object"==typeof t&&null!==t}function E(t){return O(t)&&"[object Date]"===A(t)}function j(t){return O(t)&&("[object Error]"===A(t)||t instanceof Error)}function x(t){return"function"==typeof t}function k(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function A(t){return Object.prototype.toString.call(t)}function C(t){return 10>t?"0"+t.toString(10):t.toString(10)}function T(){var t=new Date,e=[C(t.getHours()),C(t.getMinutes()),C(t.getSeconds())].join(":");return[t.getDate(),I[t.getMonth()],e].join(" ")}function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var q=/%[sdj%]/g;n.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(t).replace(q,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),a=r[n];o>n;a=r[++n])s+=y(a)||!O(a)?" "+a:" "+i(a);return s},n.deprecate=function(t,i){function o(){if(!s){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),s=!0}return t.apply(this,arguments)}if(_(r.process))return function(){return n.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return o};var J,U={};n.debuglog=function(t){if(_(J)&&(J=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!U[t])if(new RegExp("\\b"+t+"\\b","i").test(J)){var r=e.pid;U[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,r,e)}}else U[t]=function(){};return U[t]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=m,n.isBoolean=d,n.isNull=y,n.isNullOrUndefined=g,n.isNumber=v,n.isString=b,n.isSymbol=w,n.isUndefined=_,n.isRegExp=S,n.isObject=O,n.isDate=E,n.isError=j,n.isFunction=x,n.isPrimitive=k,n.isBuffer=t("./support/isBuffer");var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",T(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(t,e){if(!e||!O(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":16,_process:7,inherits:6}],18:[function(t,e,n){e.exports={author:"Cédric Belin <cedric@belin.io>",bugs:"https://github.com/cedx/akismet.js/issues",description:"Prevent comment spam using Akismet service.",homepage:"https://github.com/cedx/akismet.js",license:"Apache-2.0",main:"./index",name:"akismet-js",repository:"cedx/akismet.js",version:"0.7.1",bin:{akismet:"./bin/cli.js"},dependencies:{"body-parser":"^1.14.2",commander:"^2.9.0",cors:"^2.7.1",express:"^4.13.3",forever:"^0.15.1",superagent:"^1.6.1"},devDependencies:{"babel-preset-es2015":"^6.3.13",babelify:"^7.2.0",browserify:"^12.0.1",del:"^2.1.0",gulp:"^3.9.0","gulp-david":"^0.3.4","gulp-istanbul":"^0.10.3","gulp-jshint":"^2.0.0","gulp-load-plugins":"^1.1.0","gulp-mocha":"^2.2.0","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.6.0","gulp-uglify":"^1.5.1","gulp-zip":"^3.0.2",jsdoc:"^3.4.0",jshint:"^2.8.0",mocha:"^2.3.4","mocha-sonar-reporter":"^0.1.4","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0"},engines:{node:">=4.2.0"},jshintConfig:{browser:!0,esnext:!0,freeze:!0,futurehostile:!0,jquery:!0,latedef:"nofunc",loopfunc:!0,mocha:!0,nocomma:!0,node:!0,nonbsp:!0,nonew:!0,strict:!0,undef:!0,unused:!0,varstmt:!0,globals:{mocha:!1}},keywords:["akismet","comment","spam","validation"],scripts:{start:"forever start -c node -e var/stderr.log -o var/stdout.log -l var/forever.log --append --minUptime 30000 --spinSleepTime 30000 --uid akismet bin/cli.js",stop:"forever stop akismet",test:"gulp test"}}},{}],19:[function(t,e,n){(function(e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=t("assert"),o=t("../lib/client"),s=t("../lib/comment"),a=function(){function t(){n(this,t)}return r(t,[{key:"run",value:function(){var t=this;describe("Blog",function(){describe("constructor()",t.testConstructor),describe("fromJSON()",t.testFromJSON),describe("toJSON()",t.testToJSON)})}},{key:"testConstructor",value:function(){it("should initialize the existing properties",function(){var t=new o.Blog("https://github.com/cedx/akismet.js",{charset:"UTF-8",language:"en"});i.equal(t.charset,"UTF-8"),i.equal(t.language,"en"),i.equal(t.url,"https://github.com/cedx/akismet.js")}),it("should not create new properties",function(){return i(!("foo"in new o.Blog("https://github.com/cedx/akismet.js",{foo:"bar"})))})}},{key:"testFromJSON",value:function(){it("should return a null reference with a non-object JSON string",function(){return i.strictEqual(o.Blog.fromJSON("foo"),null)}),it("should return an empty instance with an empty JSON object",function(){var t=o.Blog.fromJSON("{}");i.strictEqual(t.charset,null),i.strictEqual(t.language,null),i.strictEqual(t.url,null)}),it("should return an initialized instance with a non-empty JSON object",function(){var t=o.Blog.fromJSON('{ "blog": "https://github.com/cedx/akismet.js", "blog_charset": "UTF-8", "blog_lang": "en" }');i.equal(t.charset,"UTF-8"),i.equal(t.language,"en"),i.equal(t.url,"https://github.com/cedx/akismet.js")})}},{key:"testToJSON",value:function(){it("should return an empty JSON object with a newly created instance",function(){return i.equal((new o.Blog).toJSON(),"{}")}),it("should return a non-empty JSON object with a initialized instance",function(){var t=new o.Blog("https://github.com/cedx/akismet.js",{charset:"UTF-8",language:"en"});i.equal(t.toJSON(),'{"blog":"https://github.com/cedx/akismet.js","blog_charset":"UTF-8","blog_lang":"en"}')})}}]),t}(),u=function(){function t(){n(this,t),this._client=new o.Client(e.env.AKISMET_API_KEY,"AKISMET_BLOG"in e.env?e.env.AKISMET_BLOG:"https://github.com/cedx/akismet.js",{isTest:!0,serviceUrl:"AKISMET_SERVICE_URL"in e.env?e.env.AKISMET_SERVICE_URL:"https://"+o.Client.DEFAULT_SERVICE}),this._ham=new s.Comment({author:new s.Author({ipAddress:"192.168.0.1",name:"Akismet.js",url:"https://github.com/cedx/akismet.js",userAgent:"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:42.0) Gecko/20100101 Firefox/42.0"}),content:"I'm testing out the Service API.",referrer:"https://www.npmjs.com/package/akismet-js",type:s.CommentType.COMMENT}),this._spam=new s.Comment({author:new s.Author({ipAddress:"127.0.0.1",name:"viagra-test-123",userAgent:"Spam Bot/6.6.6"}),content:"Spam!",type:s.CommentType.TRACKBACK})}return r(t,[{key:"run",value:function(){var t=this;describe("Client",function(){this.timeout(1e4),describe("verifyKey()",t.testVerifyKey.bind(t)),describe("submitHam()",t.testSubmitHam.bind(t)),describe("submitSpam()",t.testSubmitSpam.bind(t)),describe("checkComment()",t.testCheckComment.bind(t))})}},{key:"testCheckComment",value:function(){var t=this;it("should return `false` for valid comment (e.g. ham)",function(){return t._client.checkComment(t._ham).then(function(t){return i.strictEqual(t,!1)})}),it("should return `true` for invalid comment (e.g. spam)",function(){return t._client.checkComment(t._spam).then(function(t){return i.strictEqual(t,!0)})})}},{key:"testSubmitHam",value:function(){var t=this;it("should complete without error",function(){return t._client.submitHam(t._ham)})}},{key:"testSubmitSpam",value:function(){var t=this;it("should complete without error",function(){return t._client.submitSpam(t._spam)})}},{key:"testVerifyKey",value:function(){var t=this;it("should return `true` for a valid API key",function(){return t._client.verifyKey().then(function(t){return i.strictEqual(t,!0)})}),it("should return `false` for an invalid API key",function(){var e=new o.Client("viagra-test-123",t._client.blog,{isTest:t._client.isTest,serviceUrl:t._client.serviceUrl});return e.verifyKey().then(function(t){return i.strictEqual(t,!1)})})}}]),t}();(new a).run(),(new u).run()}).call(this,t("_process"))},{"../lib/client":1,"../lib/comment":2,_process:7,assert:4}],20:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("assert"),s=t("../lib/comment"),a=function(){function t(){r(this,t)}return i(t,[{key:"run",value:function(){var t=this;describe("Author",function(){describe("fromJSON()",t.testFromJSON),describe("toJSON()",t.testToJSON)})}},{key:"testFromJSON",value:function(){it("should return a null reference with a non-object JSON string",function(){return o.strictEqual(s.Author.fromJSON("foo"),null)}),it("should return an empty instance with an empty JSON object",function(){var t=s.Author.fromJSON("{}");o.strictEqual(t.email,null),o.strictEqual(t.url,null)}),it("should return an initialized instance with a non-empty JSON object",function(){var t=s.Author.fromJSON('{ "comment_author_email": "cedric@belin.io", "comment_author_url": "http://www.belin.io" }');o.equal(t.email,"cedric@belin.io"),o.equal(t.url,"http://www.belin.io")})}},{key:"testToJSON",value:function(){it("should return an empty JSON object with a newly created instance",function(){return o.equal((new s.Author).toJSON(),"{}")}),it("should return a non-empty JSON object with a initialized instance",function(){var t=new s.Author({name:"Cédric Belin",email:"cedric@belin.io",ipAddress:"127.0.0.1",url:"http://www.belin.io"});o.equal(t.toJSON(),'{"comment_author":"Cédric Belin","comment_author_email":"cedric@belin.io","comment_author_url":"http://www.belin.io","user_ip":"127.0.0.1"}')})}}]),t}(),u=function(){function t(){r(this,t)}return i(t,[{key:"run",value:function(){var t=this;describe("Comment",function(){describe("fromJSON()",t.testFromJSON),describe("toJSON()",t.testToJSON)})}},{key:"testFromJSON",value:function(){it("should return a null reference with a non-object JSON string",function(){return o.strictEqual(s.Comment.fromJSON("foo"),null)}),it("should return an empty instance with an empty JSON object",function(){var t=s.Comment.fromJSON("{}");o.strictEqual(t.author,null),o.strictEqual(t.content,null),o.strictEqual(t.date,null),o.strictEqual(t.referrer,null),o.strictEqual(t.type,null)}),it("should return an initialized instance with a non-empty JSON object",function(){var t=s.Comment.fromJSON('{ "comment_author": "Cédric Belin", "comment_content": "A user comment.", "comment_date_gmt": "2000-01-01T00:00:00.000Z", "comment_type": "trackback", "referrer": "http://www.belin.io" }');o(t.author instanceof s.Author),o(t.date instanceof Date),o.equal(t.author.name,"Cédric Belin"),o.equal(t.content,"A user comment."),o.equal(t.referrer,"http://www.belin.io"),o.equal(t.type,s.CommentType.TRACKBACK)})}},{key:"testToJSON",value:function(){it("should return an empty JSON object with a newly created instance",function(){return o.equal((new s.Comment).toJSON(),"{}")}),it("should return a non-empty JSON object with a initialized instance",function(){var t=new s.Comment({author:new s.Author({name:"Cédric Belin"}),content:"A user comment.",referrer:"http://www.belin.io",type:s.CommentType.PINGBACK});o.equal(t.toJSON(),'{"comment_author":"Cédric Belin","comment_content":"A user comment.","comment_type":"pingback","referrer":"http://www.belin.io"}')})}}]),t}();(new a).run(),(new u).run()},{"../lib/comment":2,assert:4}],21:[function(t,e,n){(function(e){"use strict";$(function(){var n="ontouchstart"in document.documentElement||navigator.maxTouchPoints||navigator.msMaxTouchPoints;n||$('[data-toggle="tooltip"]').tooltip({placement:"auto"}),$("#btn-submit").on("click",function(n){n.preventDefault(),$("#form-unit-tests input").each(function(t,e){var n=$(e);n.val(n.val().trim())});var r=$("#blog-url");r.val().length||r.val("https://github.com/cedx/akismet.js");var i=$("#service-url");i.val().length||i.val("http://localhost:3000");var o=$("#api-key");return o.val().length>0?(o.closest(".form-group").removeClass("has-error"),$("main").empty().append('<div id="mocha"></div>'),e.env={AKISMET_API_KEY:o.val(),AKISMET_BLOG:r.val(),AKISMET_SERVICE_URL:i.val()},mocha.setup("bdd"),t("../../test/comment_test"),t("../../test/client_test"),void mocha.run()):(o.closest(".form-group").addClass("has-error"),o.focus(),void $("#dialog-alert").modal("show"))})})}).call(this,t("_process"))},{"../../test/client_test":19,"../../test/comment_test":20,_process:7}]},{},[21]);